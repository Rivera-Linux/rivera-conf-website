<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Ticket | Rivera Conf</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #e5e5e5;
        }
        .section-glow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 60%;
            background: radial-gradient(circle, rgba(29, 78, 216, 0.15) 0%, rgba(29, 78, 216, 0) 70%);
            z-index: -1;
            pointer-events: none;
        }
        .btn-primary {
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(29, 78, 216, 0.6);
        }
        .form-input {
            background-color: #171717;
            border: 1px solid #3f3f46;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #1D4ED8;
            box-shadow: 0 0 15px rgba(29, 78, 216, 0.4);
        }
        /* Custom Modal Styles */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="sticky top-0 left-0 right-0 z-50 bg-black/30 backdrop-blur-lg border-b border-gray-800">
        <div class="container mx-auto px-4">
            <nav class="flex items-center justify-between h-20">
                <!-- You can link this back to the main page if you host it separately -->
                <a href="#" class="text-2xl font-bold text-white">Rivera Conf</a>
                <a href="#" class="hidden md:inline-block bg-gray-800 text-white font-semibold px-6 py-2 rounded-lg border border-gray-700 hover:scale-105 transition-transform">Back to Main Site</a>
            </nav>
        </div>
    </header>

    <main class="py-20 md:py-32">
        <!-- Booking Form Section -->
        <section id="booking" class="relative section-glow">
            <div class="container mx-auto px-4">
                <div class="max-w-2xl mx-auto">
                    <div class="text-center mb-12">
                        <h1 class="text-4xl md:text-5xl font-bold text-white">Secure Your All-Access Pass</h1>
                        <p class="text-lg text-gray-400 mt-4">Complete the form below to confirm your registration.</p>
                        <div class="mt-4 mx-auto h-1 w-24 bg-blue-600 rounded"></div>
                    </div>

                    <div class="bg-gray-900/50 border border-gray-800 rounded-2xl p-8 md:p-12">
                        <form id="booking-form">
                            <div class="space-y-6">
                                <!-- Full Name -->
                                <div>
                                    <label for="full-name" class="block text-sm font-medium text-gray-300 mb-2">Full Name</label>
                                    <input type="text" id="full-name" name="full-name" required class="form-input w-full px-4 py-3 rounded-lg text-white" placeholder="e.g., Ada Lovelace">
                                </div>
                                <!-- Email Address -->
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email Address</label>
                                    <input type="email" id="email" name="email" required class="form-input w-full px-4 py-3 rounded-lg text-white" placeholder="you@example.com">
                                </div>
                                <!-- Discord Username -->
                                <div>
                                    <label for="discord" class="block text-sm font-medium text-gray-300 mb-2">Discord Username</label>
                                    <input type="text" id="discord" name="discord" required class="form-input w-full px-4 py-3 rounded-lg text-white" placeholder="e.g., a_lovelace#1815">
                                </div>
                            </div>
                            <div class="mt-10">
                                <button type="submit" id="submit-button" class="w-full btn-primary bg-blue-700 text-white font-bold px-10 py-4 rounded-lg text-lg flex items-center justify-center">
                                    <span id="button-text">Confirm & Register</span>
                                    <!-- Spinner -->
                                    <svg id="spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-black border-t border-gray-800 mt-20">
        <div class="container mx-auto px-4 py-12">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left">
                <div class="mb-4 md:mb-0">
                    <h3 class="text-xl font-bold text-white">Rivera Conf</h3>
                    <p class="text-gray-400">Â© 2025 Rivera Conf. All rights reserved.</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">Code of Conduct</a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Custom Modal -->
    <div id="response-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4 hidden opacity-0">
        <div id="modal-content" class="modal-content bg-gray-900 border border-gray-700 rounded-xl shadow-2xl p-8 max-w-sm w-full text-center transform scale-95 opacity-0">
            <h3 id="modal-title" class="text-2xl font-bold text-white mb-4"></h3>
            <p id="modal-message" class="text-gray-300 mb-6"></p>
            <!-- Action Buttons -->
            <a id="modal-redirect-button" href="#" class="w-full block bg-blue-700 text-white text-center font-semibold px-6 py-2 rounded-lg btn-primary hidden"></a>
            <button id="modal-close-button" class="w-full bg-gray-700 text-white font-semibold px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors hidden">Close</button>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const bookingForm = document.getElementById('booking-form');
            const submitButton = document.getElementById('submit-button');
            const buttonText = document.getElementById('button-text');
            const spinner = document.getElementById('spinner');

            // Modal elements
            const modal = document.getElementById('response-modal');
            const modalContent = document.getElementById('modal-content');
            const modalTitle = document.getElementById('modal-title');
            const modalMessage = document.getElementById('modal-message');
            const modalRedirectButton = document.getElementById('modal-redirect-button');
            const modalCloseButton = document.getElementById('modal-close-button');


            // --- Webhook Configuration ---
            const webhookUrl = 'https://discord.com/api/webhooks/1394789811403100170/f7s7nb3qOK-4R9aBRng3tb2yABa0MALU_0ZPeOYA-IKsIQ6bSLNeVeBrKDoepfLXA_dX;

            // --- Redirect Configuration ---
            // IMPORTANT: Replace this with the URL you want to redirect to after successful registration.
            const redirectUrl = 'https://discord.gg/e9nFeejkNh'; // <<<<<<< CHANGE THIS URL

            const showModal = (title, message, isSuccess) => {
                modalTitle.textContent = title;
                modalMessage.textContent = message;

                if (isSuccess) {
                    modalTitle.className = 'text-2xl font-bold text-green-400 mb-4';
                    modalRedirectButton.textContent = 'Join the Discord';
                    modalRedirectButton.href = redirectUrl;
                    modalRedirectButton.classList.remove('hidden');
                    modalCloseButton.classList.add('hidden');
                } else {
                    modalTitle.className = 'text-2xl font-bold text-red-400 mb-4';
                    modalCloseButton.classList.remove('hidden');
                    modalRedirectButton.classList.add('hidden');
                }

                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modalContent.classList.remove('scale-95', 'opacity-0');
                }, 10);
            };

            const hideModal = () => {
                modal.classList.add('opacity-0');
                modalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300); // Wait for transition to finish
            };

            modalCloseButton.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    hideModal();
                }
            });


            bookingForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                // Show loading state
                buttonText.textContent = 'Processing...';
                spinner.classList.remove('hidden');
                submitButton.disabled = true;

                const formData = new FormData(bookingForm);
                const name = formData.get('full-name');
                const email = formData.get('email');
                const discord = formData.get('discord');

                const payload = {
                    username: "Rivera Tickets",
                    avatar_url: "https://placehold.co/128x128/1d4ed8/ffffff?text=T",
                    embeds: [{
                        title: "New Ticket Registration!",
                        color: 3447003, // Blue color
                        fields: [
                            { name: "Name", value: name, inline: true },
                            { name: "Discord", value: discord, inline: true },
                            { name: "Email", value: email }
                        ],
                        footer: {
                            text: `Registration received: ${new Date().toUTCString()}`
                        }
                    }]
                };

                try {
                    if (webhookUrl.includes('boi-u-aint-getting-the-webhook-url')) {
                        console.warn("Webhook URL is a placeholder. Simulating success.");
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        showModal('Registration Complete!', 'Your ticket for Rivera Conf is confirmed. We have simulated sending your details.', true);
                        bookingForm.reset();
                    } else {
                        const response = await fetch(webhookUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload),
                        });

                        if (response.ok) {
                            showModal('Registration Complete!', 'Your ticket for Rivera Conf is confirmed. We have sent your details.', true);
                            bookingForm.reset();
                        } else {
                            throw new Error(`Server responded with status: ${response.status}`);
                        }
                    }
                } catch (error) {
                    console.error('Failed to send webhook:', error);
                    showModal('Registration Failed', 'Something went wrong. Please try again later or contact support.', false);
                } finally {
                    buttonText.textContent = 'Confirm & Register';
                    spinner.classList.add('hidden');
                    submitButton.disabled = false;
                }
            });
        });
    </script>

</body>
</html>
